(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4707],{48607:function(e,n,t){"use strict";t.d(n,{Y:function(){return a}});var o=t(66383),i=t(2784);function a(e){var n=e.onSwipedRight,t=e.onSwipedLeft,a=e.onSwipedUp,r=e.onSwipedDown,s=e.minSwipeDistance,l=void 0===s?75:s,c=(0,o.Z)((0,i.useState)(0),2),u=c[0],m=c[1],d=(0,o.Z)((0,i.useState)(0),2),p=d[0],v=d[1],h=(0,o.Z)((0,i.useState)(0),2),f=h[0],_=h[1],U=(0,o.Z)((0,i.useState)(0),2),g=U[0],y=U[1];return{onTouchStart:function(e){v(0),y(0),m(e.targetTouches[0].clientX),_(e.targetTouches[0].clientY)},onTouchMove:function(e){v(e.targetTouches[0].clientX),y(e.targetTouches[0].clientY)},onTouchEnd:function(){if(u&&p&&f&&g){var e=u-p,o=f-g;e>l&&t&&t(),e<-l&&n&&n(),o>l&&a&&a(),o<-l&&r&&r()}}}}},47715:function(e,n,t){"use strict";t.d(n,{r:function(){return k}});var o=t(70865),i=t(96670),a=t(66383),r=t(50930),s=t(52322),l=t(2784),c=t(23248),u=t(67387),m=t(31909),d=t(51383),p=t(98780),v=t(11559),h=t(87049),f=t(6013),_=t(72677),U=t(71390),g=t(45227),y=t(1324),x=t(39368),b=(0,y.q)({url:function(e){var n=e.postId;return"/magnet/posts/".concat(n,"/comments/create/")},transformer:function(e){var n=(e.data||{}).comment;return{comment:(0,x.T)({data:n})}},inputTransformer:function(e){return{comment:e.commentBody}},type:g.XN.POST}),C=t(62075),N=(0,y.q)({url:function(e){var n=e.postId;return"/magnet/posts/".concat(n,"/comments/create/")},transformer:function(e){var n=(e.data||{}).comment;return{comment:(0,x.T)({data:n})}},inputTransformer:function(e){return{comment:e.commentBody,base_comment_id:e.commentId}},type:g.XN.POST});function T(e){var n=e.className,t=e.post,o=e.onCommentSent,i=e.inputDisabled,r=e.inputOnClick,c=e.replyTo,u=t||{},g=u.postId,y=u.postAuthor,x=(0,a.Z)((0,l.useState)(""),2),T=x[0],k=x[1],w=(0,h.v)(f.p.socialData).socialProfile,S=(0,v.E)({apiMethod:b,onSuccess:function(e){return o(e.comment)}}),j=S.request,I=S.pending,E=(0,v.E)({apiMethod:N,onSuccess:function(e){return o(e.comment)}}),R=E.request,Z=E.pending,z=""===T.trim();(0,l.useEffect)(function(){c&&k("@".concat(null==c?void 0:c.username," "))},[c]);var D=function(e){e.preventDefault(),I||Z||z||(c?R({postId:g,commentBody:T,commentId:null==c?void 0:c.commentId}):j({postId:g,commentBody:T}),k(""),(0,C.f3)({postId:g,postAuthorId:null==y?void 0:y.authorId}))};return(0,s.jsxs)("form",{onSubmit:D,className:(0,_.d)(n,"p-3 flex items-center gap-3 bg-neutral-100 border-complete rounded-large"),onClick:r,children:[(0,s.jsx)(m.E,{className:"shrink-0",imageClassName:"rounded-circle",image:null==w?void 0:w.socialProfileImage,src:U.C,height:24,width:24}),(0,s.jsx)("input",{className:"w-full border-none text-neutral-600 placeholder-neutral-300",placeholder:"دیدگاه خود را بنویسید ...",onChange:function(e){return k(e.target.value)},value:T,disabled:void 0!==i&&i}),!z&&(0,s.jsx)(d.P,{children:(0,s.jsx)(p.J,{icon:"send",color:I||Z?"low-emphasis":"secondary",size:18,onClick:D})})]})}var k=(0,l.memo)(function(e){var n=e.post,t=e.isOpen,d=e.onClose,p=e.commentItemClassName,v=e.commentItemContainerClassName,h=e.inputDisabled,f=e.inputOnClick,_=e.modalClassName,U=e.onBigDataTracker,g=(n||{}).postId,y=(0,a.Z)((0,l.useState)(null),2),x=y[0],b=y[1],C=(0,a.Z)((0,l.useState)([]),2),N=C[0],k=C[1];return(0,l.useEffect)(function(){t&&U&&U(),t||b(null)},[t]),(0,s.jsx)(u.R,{header:(0,s.jsx)("span",{className:"text-h5 bg-neutral-000 px-1",children:"دیدگاه‌ها"}),isOpen:t,onClose:d,className:_,footer:(0,s.jsx)(T,{className:"mb-3 lg:mb-0",post:n,onCommentSent:function(e){x?k(function(n){return null==n?void 0:n.map(function(n){if(n.commentId===x.commentId){var t=(0,r.Z)(n.commentTopReplies||[]).concat([e]);return(0,i.Z)((0,o.Z)({},n),{commentTopReplies:t,commentRepliesCount:(n.commentRepliesCount||0)+1})}return n})}):k(function(n){return[e].concat((0,r.Z)(n))}),b(null)},inputDisabled:h,inputOnClick:f,replyTo:x}),onTouchEnd:function(e){e.stopPropagation()},children:(0,s.jsx)(c.D,{postId:g,disabled:!t,shouldDisplayLoading:!0,loadingClassName:"my-20",commentItemClassName:p,commentItemContainerClassName:v,onReplyClick:function(e,n){b({username:e,commentId:n})},emptyStateElement:(0,s.jsxs)("div",{className:"my-15 flex flex-col gap-3 justify-center items-center",children:[(0,s.jsx)(m.E,{src:"/statics/img/svg/empty-comments.svg",width:256,height:192,alt:"empty-comments"}),(0,s.jsx)("p",{className:"text-color-700 text-body-1",children:"اولین نفری باش که دیدگاه می‌نویسد!"})]}),setAllComments:k,allComments:N})})})},842:function(e,n,t){"use strict";t.d(n,{Q:function(){return c}});var o=t(52322),i=t(34990),a=t(18577),r=t(73076),s=t(90830),l=t.n(s);function c(e){var n=e.onChange,t=e.videoTimer,s=e.onTouchMove,c=e.onTouchEnd,u=e.className,m=t.playedPercent,d=t.playedSeconds,p=(0,a.ox)(d),v=p.hours,h=p.minutes,f=p.seconds,_=0===Math.floor(Number((0,r.d)(v)))?"":"".concat(v,":"),U="".concat(_).concat(h,":").concat(f);return(0,o.jsxs)("div",{className:(0,a.dh)("w-full pt-4 pb-3 flex items-center justify-between gap-1",u),onTouchEnd:function(e){return e.stopPropagation()},children:[(0,o.jsx)(i.U,{direction:"ltr",handleClassName:"!bg-white !h-4 !w-4",activeRangeClassName:"!bg-white",rangeClassName:l().VideoPlayerSeeker__range,pipClassName:"hidden",min:0,max:100,onChange:n,value:[m],onTouchMove:s,onTouchEnd:c}),(0,o.jsx)("p",{className:"text-white text-caption-strong w-12 text-left",children:U})]})}},67387:function(e,n,t){"use strict";t.d(n,{R:function(){return m}});var o=t(70865),i=t(96670),a=t(26297),r=t(50930),s=t(52322),l=t(2784),c=t(67950),u=t(98780),m=(0,l.forwardRef)(function(e,n){var t,l=e.isOpen,m=e.onClose,d=e.children,p=e.header,v=e.fixedHeight,h=(0,a.Z)(e,["isOpen","onClose","children","header","fixedHeight"]);return(0,s.jsx)(c.R,(0,i.Z)((0,o.Z)({expandOnContentDrag:!0,open:l,onDismiss:m,springConfig:{mass:.1,tension:400,friction:15},defaultSnap:function(e){var n=e.snapPoints,o=e.maxHeight;return v?Math.min(v,1)*o:(t=Math).min.apply(t,(0,r.Z)(n))},snapPoints:function(e){var n=e.maxHeight,t=[Math.min(.7*n,e.minHeight),n];return v&&t.push(Math.min(v,1)*n),t},header:p&&(0,s.jsxs)("div",{className:"flex w-full justify-between items-center gap-3 mb-2",children:[p,(0,s.jsx)(u.J,{onClick:m,icon:"cube-nav-close"})]})},h),{ref:n,children:d}))})},34990:function(e,n,t){"use strict";t.d(n,{U:function(){return p}});var o=t(70865),i=t(52322),a=t(50930),r=t(2784),s=t(6547),l=t.n(s),c=t(18577),u=t(907),m=t.n(u);function d(e){var n=e.name,t=e.direction,o=void 0===t?"rtl":t,s=e.min,u=e.max,d=e.value,p=void 0===d?[]:d,v=e.onChange,h=e.handleAttributes,f=e.pips,_=void 0===f?{density:20}:f,U=e.step,g=void 0===U?1:U,y=e.className,x=e.markerClassName,b=void 0===x?m()["noUi-marker-horizontal"]:x,C=e.handleClassName,N=e.pipClassName,T=e.rangeClassName,k=e.activeRangeClassName,w=e.onTouchMove,S=void 0===w?c.ZT:w,j=e.onTouchEnd,I=void 0===j?c.ZT:j,E=(0,r.useRef)(),R=(0,r.useRef)();return(0,r.useEffect)(function(){return R.current||(R.current=l().create(E.current,{start:p,connect:(null==p?void 0:p.length)>1||"lower",direction:o,handleAttributes:(null==h?void 0:h.length)===(null==p?void 0:p.length)?h:void 0,step:g,pips:_,range:{min:s,max:u},cssPrefix:"",cssClasses:{target:m()["noUi-target"],base:m()["noUi-base"],origin:m()["noUi-origin"],handle:(0,c.dh)(m()["noUi-handle"],C),touchArea:m()["noUi-touch-area"],horizontal:m()["noUi-horizontal"],vertical:m()["noUi-vertical"],connect:(0,c.dh)(m()["noUi-connect"],k),connects:(0,c.dh)(m()["noUi-connects"],T),ltr:m()["noUi-ltr"],rtl:m()["noUi-rtl"],textDirectionLtr:m()["noUi-txt-dir-ltr"],textDirectionRtl:m()["noUi-txt-dir-rtl"],draggable:m()["noUi-draggable"],drag:m()["noUi-state-drag"],tap:m()["noUi-state-tap"],active:m()["noUi-active"],tooltip:m()["noUi-tooltip"],pips:(0,c.dh)(m()["noUi-pips"],N),pipsHorizontal:m()["noUi-pips-horizontal"],pipsVertical:m()["noUi-pips-vertical"],marker:m()["noUi-marker"],markerHorizontal:b,markerLarge:m()["noUi-marker-large"],markerSub:m()["noUi-pips-sub"],value:m()["noUi-value"],valueHorizontal:m()["noUi-value-horizontal"],valueVertical:m()["noUi-value-vertical"],valueNormal:m()["noUi-value-normal"],valueLarge:m()["noUi-value-large"],valueSub:m()["noUi-value-sub"]}})),function(){var e,n,t;null===(e=null==R?void 0:R.current)||void 0===e||null===(n=e.noUiSlider)||void 0===n||null===(t=n.destroy)||void 0===t||t.call(n)}},[]),(0,r.useEffect)(function(){var e,n;null===(e=null==R?void 0:R.current)||void 0===e||null===(n=e.updateOptions)||void 0===n||n.call(e,{range:{min:s,max:u}},!0)},[s,u]),(0,r.useEffect)(function(){var e,t,o,i,a,r=null===(e=null==R?void 0:R.current)||void 0===e?void 0:e.get();return p.some(function(e,n){return Number(e)!==Number(r[n])})&&(null===(i=null==R?void 0:R.current)||void 0===i||null===(a=i.set)||void 0===a||a.call(i,p)),null===(t=null==R?void 0:R.current)||void 0===t||null===(o=t.on)||void 0===o||o.call(t,"update",function(e){p.some(function(n,t){return Number(n)!==Number(e[t])})&&(null==v||v({value:e,name:n}))}),function(){var e,n;null===(e=null==R?void 0:R.current)||void 0===e||null===(n=e.off)||void 0===n||n.call(e,"update")}},(0,a.Z)(p).concat([n,v])),(0,i.jsx)("div",{className:(0,c.dh)("pr-1 pl-1 w-full",y),onTouchMove:S,onTouchEnd:I,children:(0,i.jsx)("div",{ref:E})})}function p(e){return(0,i.jsx)(d,(0,o.Z)({},e))}},90830:function(e){e.exports={VideoPlayerProgressbar__range:"styles_VideoPlayerProgressbar__range__whAT3"}},907:function(e){e.exports={"noUi-target":"styles_noUi-target__XAwMt","noUi-base":"styles_noUi-base__VsFI9","noUi-connects":"styles_noUi-connects__bbrsT","noUi-connect":"styles_noUi-connect__FBBSb","noUi-origin":"styles_noUi-origin__UEgCh","noUi-txt-dir-rtl":"styles_noUi-txt-dir-rtl__iqVbf","noUi-horizontal":"styles_noUi-horizontal__dw6Te","noUi-vertical":"styles_noUi-vertical___RXpJ","noUi-handle":"styles_noUi-handle__8L8O2","noUi-touch-area":"styles_noUi-touch-area__Lm7W6","noUi-state-tap":"styles_noUi-state-tap__dG_qu","noUi-state-drag":"styles_noUi-state-drag__C05QU","noUi-draggable":"styles_noUi-draggable__MTW_M","noUi-active":"styles_noUi-active___kO3x","noUi-pips":"styles_noUi-pips__UmpDJ","noUi-value":"styles_noUi-value__OxDP1","noUi-value-sub":"styles_noUi-value-sub__kknTe","noUi-marker":"styles_noUi-marker__5cMCy","noUi-marker-sub":"styles_noUi-marker-sub__v2vwQ","noUi-marker-large":"styles_noUi-marker-large__MjD_8","noUi-pips-horizontal":"styles_noUi-pips-horizontal__KW2RI","noUi-value-horizontal":"styles_noUi-value-horizontal__CSfom","noUi-rtl":"styles_noUi-rtl__a4z36","noUi-marker-horizontal":"styles_noUi-marker-horizontal__4RGRJ","noUi-pips-vertical":"styles_noUi-pips-vertical__Hwad_","noUi-value-vertical":"styles_noUi-value-vertical__po5AX","noUi-marker-vertical":"styles_noUi-marker-vertical__bI49x","noUi-tooltip":"styles_noUi-tooltip__L4_c7"}}}]);