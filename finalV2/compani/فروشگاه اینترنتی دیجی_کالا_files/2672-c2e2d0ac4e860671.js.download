(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2672],{95435:function(e,n,r){"use strict";r.d(n,{$:function(){return U}});var t=r(66383),i=r(52322),a=r(2784),s=r(57931),l=r(16137),o=r(73739),u=r(98723),c=r(47072),d=r(45756),m=r(26442),f=r(11559),h=r(90247),v=r(87049),p=r(35328),I=r(83178),_=r(6013),N=r(9697),T=r(52216),b=r(72677),x=r(70865),A=r(96670),R=r(26297),S=r(21494),g=r(40046),D=r.n(g);function E(e){var n=e.className,r=e.onChange,t=(0,R.Z)(e,["className","onChange"]);return(0,i.jsx)(S.I,(0,A.Z)((0,x.Z)({type:"number",label:"کد ملی",isRequired:!0,isTitleBoxAligned:!0,helper:"متعلق به مالک شماره موبایل",inputWrapperProps:{fullWidth:!0},inputClassName:D().nationalIdInput,className:n},t),{onChange:function(e){var n=((null==e?void 0:e.target)||{}).value;(null==n?void 0:n.length)<=10&&r(e)}}))}var y=r(65339),O=r(13901),j=r(17664),C=r(45644),B=r(45227),H=r(1324),P=r(73076),k=(0,H.q)({type:B.XN.POST,url:"profile/user-identity/verify/",transformer:function(e){var n=e.data||{};return{firstName:n.first_name,lastName:n.last_name,smsTtl:n.sms_ttl,limited:n.limited}},inputTransformer:function(e){var n=e.userFirstName,r=e.userLastName,t=e.userNationalId,i=e.userBirthDay,a=e.userBirthMonth,s=e.userBirthYear,l=e.userPhoneNumber;return{phone_number:(0,P.d)(l),first_name:n,last_name:r,national_identity_number:(0,P.d)(t),birth_year:(0,P.d)(s),birth_month:(0,P.d)(a),birth_day:(0,P.d)(i)}}}),L=r(37410),w=(0,H.q)({type:B.XN.POST,url:"profile/user-identity/verify/",version:2,transformer:function(e){var n=e.data||{},r=n.user,t=n.limited;return{user:(0,L.s)({data:r}),limited:t}},inputTransformer:function(e){var n=e.userFirstName,r=e.userLastName,t=e.userNationalId,i=e.userBirthDay,a=e.userBirthMonth,s=e.userBirthYear,l=e.userPhoneNumber;return{phone_number:(0,P.d)(l),first_name:n,last_name:r,national_identity_number:(0,P.d)(t),birth_year:(0,P.d)(s),birth_month:(0,P.d)(a),birth_day:(0,P.d)(i)}}}),F=r(72372),V=r.n(F),M={NATIONAL_ID:"NATIONAL_ID",BIRTHDATE_YEAR:"BIRTHDATE_YEAR",BIRTHDATE_MONTH:"BIRTHDATE_MONTH",BIRTHDATE_DAY:"BIRTHDATE_DAY"};function U(e){var n=e.className,r=e.onSuccess,x=e.onError,A=e.onPressBack,R=e.hideHeaderTitle,S=e.isInModal,g=(0,t.Z)((0,a.useState)(!1),2),D=g[0],B=g[1],H=(0,v.v)(_.p.userInfo),P=(0,v.v)(I.n.isWebView),L=(0,f.E)({apiMethod:S?w:k,onError:function(e){var n=e.data;return null==x?void 0:x(n)},onSuccess:function(e){if(e.limited){B(!0);return}r(e)}}),F=L.request,U=L.pending,Y=(0,h.c)(),q=Y.states,z=Y.formHandlers,G=Y.ref,Z=Y.getValues,W=Y.setValue,K=(q||{}).isValid,X=function(){var e=Z()||{},n=e[M.NATIONAL_ID],r=e[M.BIRTHDATE_DAY],t=e[M.BIRTHDATE_MONTH],i=e[M.BIRTHDATE_YEAR],a=(H||{}).userPhone;F({userNationalId:n,userBirthDay:r.value,userBirthMonth:t.value,userBirthYear:i.value,userPhoneNumber:a}).then(p.Ci)},$=[{component:(0,i.jsx)(E,{className:"mb-4"}),name:M.NATIONAL_ID,rules:{validate:N.BI}},{component:(0,i.jsxs)("div",{className:"flex text-body-1 mb-2",children:[(0,i.jsx)("span",{children:"تاریخ تولد"}),(0,i.jsx)("span",{className:"text-primary-500",children:"*"})]})},{component:(0,i.jsx)(y.R,{className:(0,b.d)(V().AccountVerificationForm__smallTimeInput,"inline-block"),items:O.z,isRequired:!0,disableSearch:!0,isNumericValue:!0,placeholder:"روز",setValue:W}),name:M.BIRTHDATE_DAY,rules:{validate:function(e){return(0,N.C1)(null==e?void 0:e.value)}}},{component:(0,i.jsx)(y.R,{className:(0,b.d)(V().AccountVerificationForm__smallTimeInput,"mr-3 inline-block"),items:j.g,isRequired:!0,disableSearch:!0,placeholder:"ماه",setValue:W}),name:M.BIRTHDATE_MONTH,rules:{validate:function(e){return(0,N.C1)(null==e?void 0:e.value)}}},{component:(0,i.jsx)(y.R,{className:(0,b.d)(V().AccountVerificationForm__smallTimeInput,"mr-3 inline-block"),items:C.I,isRequired:!0,disableSearch:!0,placeholder:"سال",setValue:W,isNumericValue:!0}),name:M.BIRTHDATE_YEAR,rules:{validate:function(e){return(0,N.C1)(null==e?void 0:e.value)}}}];return(0,i.jsxs)("div",{className:n,children:[R?null:(0,i.jsx)(c.D,{title:"تایید هویت",rightIcon:!P&&"arrowRight",rightIconOnClick:!P&&A}),(0,i.jsxs)("p",{className:"text-neutral-600 text-body-1 pb-4",children:["اطلاعات شناسایی خود را منطبق با کارت ملی وارد کنید. این اطلاعات باید متعلق به مالک شماره"," ",(0,i.jsx)("span",{className:"text-body1-strong text-neutral-800",children:(0,T.U)(null==H?void 0:H.userPhone)})," ","باشد."]}),(0,i.jsx)(l.l,{ref:G,formHandlers:z,onSubmit:X,useFormProps:{mode:"onChange"},items:$}),(0,i.jsx)(o.k,{color:"gray",mode:"normal",size:"small",className:"mb-15 mt-4",children:"لطفاً دقت کنید! درستی اطلاعات توسط سامانه ثبت احوال بررسی می‌شود و هر سال فقط ۵ بار می‌توانید ثبت درخواست انجام دهید."}),(0,i.jsxs)("div",{className:"fixed bottom-0 right-0 w-full bg-neutral-000 py-3 px-5 lg:items-center lg:pt-4 lg:px-0 lg:static",children:[D&&(0,i.jsx)(o.k,{mode:"filled",color:"error",size:"small",className:"self-start mb-6",children:(0,i.jsxs)("div",{className:"text-body-2 text-hint-text-error",children:["ثبت بیش از ۵ درخواست در سال ممکن نیست. برای تایید هویت، اطلاعات شناسایی‌تان را"," ",(0,i.jsxs)(u.r,{className:"text-secondary-700",target:"_blank",to:m.Kk,children:["برای پشتیبانی ارسال کنید."," "]})," "]})}),(0,i.jsx)(s.z,{label:"ثبت",className:"w-full",type:"submit",isLoading:U,onClick:X,disabled:!K||D,CROId:d.h.PROFILE_IDENTITY_SUBMIT})]})]})}},65339:function(e,n,r){"use strict";r.d(n,{R:function(){return s}});var t=r(52322),i=r(72251),a=r(52216);function s(e){var n,r=e.items,s=e.name,l=e.value,o=e.error,u=e.label,c=e.placeholder,d=e.isNumericValue,m=e.isRequired,f=e.disableSearch,h=e.setValue,v=e.onChange,p=e.className;return(0,t.jsx)(i.vb,{name:s,value:null!==(n=null==l?void 0:l.text)&&void 0!==n?n:"",onSelect:function(e,n){h(s,{value:e,text:n}),v({value:e})},error:o,label:u,required:m,placeholder:c,disableSearch:f,titleBoxAligned:!0,className:p,isReadOnly:!0,children:r.map(function(e,n){return(0,t.jsx)(i.bK,{value:d?e:n+1,children:d?(0,a.U)(e):e},"".concat(s,"_").concat(e))})})}},17830:function(e,n,r){"use strict";r.d(n,{c:function(){return m}});var t=r(52322),i=r(66524),a=r(59437),s=r(73739),l=r(51985),o=r(45756),u=r(17668),c=r(75490),d=r(72677);function m(e){var n=e.className,r=e.noticeText,m=e.linkText,f=e.onSuccessVerification,h=(0,i.R)({modalId:"profile-kyc"}),v=h.isOpen,p=h.onOpen,I=h.onClose,_=(0,u.F)(),N=_.isUserAccountVerified,T=_.isUserPhoneAuthenticated;return N?null:(0,t.jsxs)("div",{className:(0,d.d)("flex flex-col lg:flex-row items-center justify-between py-3 px-5 border-complete-200 rounded-medium mx-5 lg:mx-0",n),children:[(0,t.jsx)(s.k,{mode:"normal",color:"yellow",size:"small",className:"self-start",children:void 0===r?"با تایید هویت می‌توانید‌ امنیت حساب کاربری‌تان را افزایش دهید و از امکان \xabخرید اعتباری\xbb نیز استفاده کنید":r}),(0,t.jsx)(a.e,{mode:"anchor",CROId:o.h.PROFILE_IDENTITY,label:void 0===m?"تایید هویت":m,onClick:function(){T?p():(0,c.p)({message:"برای ثبت اطلاعات هویتی ابتدا شماره موبایل خود را در پروفایل تایید کنید."})},className:"self-end"}),(0,t.jsx)(l.n,{onSuccess:function(){null==f||f(),I()},isOpen:v,onClose:I})]})}},13901:function(e,n,r){"use strict";r.d(n,{z:function(){return t}});var t=Array(31).fill(null).map(function(e,n){return n+1})},17664:function(e,n,r){"use strict";r.d(n,{g:function(){return t}});var t=["فروردین","اردیبهشت","خرداد","تیر","مرداد","شهریور","مهر","آبان","آذر","دی","بهمن","اسفند"]},45644:function(e,n,r){"use strict";r.d(n,{I:function(){return t}});var t=Array(100).fill(null).map(function(e,n){return n+1300}).reverse()},16648:function(e,n,r){"use strict";r.d(n,{R:function(){return s}});var t=r(70865),i=r(52322),a=r(89040);function s(e){return(0,i.jsx)(a.R,(0,t.Z)({},e))}},99913:function(e,n,r){"use strict";r.d(n,{E:function(){return l}});var t=r(52322),i=r(87049),a=r(72677),s=r(6013);function l(e){var n=e.label,r=e.children,l=e.className,o=e.activationUrl,u=e.isActive,c=void 0===u||u,d=(0,i.v)(s.p.walletData).digipayActivationUrl,m=null!=o?o:d;return(0,t.jsx)("div",{className:(0,a.d)("cursor-pointer",l),onClick:function(){if((null==window?void 0:window.open)&&c){var e;null===(e=window.open(m,"_blank"))||void 0===e||e.focus()}},children:null!=r?r:n})}},51985:function(e,n,r){"use strict";r.d(n,{n:function(){return d}});var t=r(52322),i=r(2784),a=r(50603),s=r(53828),l=r(17668),o=r(81964),u=r(75490),c=r(95435);function d(e){var n=e.className,r=e.isOpen,d=e.onClose,m=e.onSuccess,f=e.onError,h=(0,l.F)().isUserPhoneAuthenticated,v=(0,s.I)();return(0,i.useEffect)(function(){r&&!h&&(d(),(0,u.p)({message:"برای ثبت اطلاعات هویتی ابتدا شماره موبایل خود را در پروفایل تایید کنید."}))},[r]),(0,t.jsx)(a.Modal,{className:n,width:360,headerTitle:"تایید هویت",isOpen:r,onDismiss:d,children:(0,t.jsx)(c.$,{className:"overflow-y-auto pb-20 lg:pb-0",onSuccess:function(e){var n=(e||{}).user;v((0,o.gS)(n)),m(e)},onError:f,hideHeaderTitle:!0,isInModal:!0})})}},41218:function(e,n,r){"use strict";r.d(n,{P:function(){return f}});var t=r(47842),i=r(52322),a=r(16648),s=r(47072),l=r(26442),o=r(64177),u=r(27314),c=r(72677),d=r(33256),m=r.n(d);function f(e){var n=e.children,r=e.className,d=e.title,f=e.headerAction,h=void 0===f?null:f,v=e.withTitleLine,p=e.hideLineInSmallScreen,I=e.hasWhiteBackground,_=e.isMobileHeaderCard,N=e.isDesktopHeader,T=e.hasHeaderActionInMobile,b=e.hasTitleInMobile,x=e.shouldShowBack,A=void 0!==x&&x,R=e.onBackClicked,S=(0,u.e)().redirect,g=(0,o.C)().isDesktop,D=(0,c.d)("mb-4",{"bg-neutral-000":void 0===I||I},r),E=(0,c.d)((0,t.Z)({},m()["ProfileCard__title--mobileHeader"],_));if(_&&g)return null;var y=!!d&&(g&&N||b||_),O=!!h&&(g||T),j=(0,c.d)("flex justify-between items-center lg:py-4 px-4",{"lg:pl-6 lg:pr-4":A});return(0,i.jsxs)(a.R,{className:D,children:[(y||O)&&(0,i.jsxs)("div",{className:j,children:[y&&(0,i.jsx)(s.D,{title:d,withLine:void 0===v||v,className:E,hideLineInSmallScreen:p,rightIcon:!g&&_||A?"arrowRight":null,rightIconOnClick:R||function(){S({url:l._2})}}),O&&h]}),void 0===n?null:n]})}},45873:function(e,n,r){"use strict";r.d(n,{g:function(){return t}});var t={DIGIPLUS:"DIGIPLUS",DASHBOARD:"DASHBOARD",ORDERS:"ORDERS",LISTS:"LISTS",COMMENTS:"COMMENTS",ADDRESSES:"ADDRESSES",GIFT_CARDS:"GIFT_CARDS",NOTIFICATIONS:"NOTIFICATIONS",USER_HISTORY:"USER_HISTORY",USER_INFO:"USER_INFO",LOGOUT:"LOGOUT"}},17668:function(e,n,r){"use strict";r.d(n,{F:function(){return l}});var t=r(43997),i=r(24259),a=r(6013),s=r(41435);function l(){var e=(0,t.v9)(a.p.userInfo),n=e.userPhone;return{isUserAccountVerified:e.userVerificationStatus===i.A.VERIFIED,isUserPhoneAuthenticated:!(0,s.x)(n)}}},41701:function(e,n,r){"use strict";function t(e){var n=e.component,r=e.getAPIMethods,t=e.layoutProps,i=e.isPrivate,a=e.noDefaultLoader,s=e.pageActivatorFeature,l=e.redirectIfLogin,o=e.afterLogin,u=e.disableSSR,c=e.dataProps;return n.getAPIMethods=r,n.layoutProps=t,n.isPrivate=i,n.noDefaultLoader=a,n.pageActivatorFeature=s,n.redirectIfLogin=l,n.afterLogin=o,n.disableSSR=u,n.dataProps=c,n}r.d(n,{D:function(){return t}})},40046:function(e){e.exports={nationalIdInput:"styles_nationalIdInput__cqRoV"}},72372:function(e){e.exports={AccountVerificationForm__smallTimeInput:"styles_AccountVerificationForm__smallTimeInput__QhDo3"}},33256:function(e){e.exports={"ProfileCard__title--mobileHeader":"styles_ProfileCard__title--mobileHeader__Tpkul"}}}]);